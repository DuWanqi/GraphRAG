"""
提示词模板库
针对不同场景的提示词模板
"""

from typing import Dict


class PromptTemplates:
    """提示词模板管理"""
    
    # 历史背景生成 - 标准版
    STANDARD = """请根据以下信息，为回忆录片段生成1-3段历史背景描述。

## 回忆录原文
{memoir_text}

## 时间背景
年份：{year}
地点：{location}

## 相关历史信息
{context}

要求：
1. 生成的内容应能自然衔接在回忆录原文之后
2. 使用文学性的语言，避免教科书式叙述
3. 突出历史与个人经历的关联
4. 字数控制在200-500字

请直接输出历史背景描述文本。"""

    # 历史背景生成 - 怀旧风格
    NOSTALGIC = """你是一位善于捕捉时代记忆的作家。请根据以下信息，用怀旧的笔触描绘那个年代的氛围。

## 个人记忆片段
{memoir_text}

## 时代坐标
年代：{year}
地点：{location}

## 历史剪影
{context}

写作要求：
1. 用"那个年代"、"记得当时"等怀旧语气
2. 描写时代特有的声音、气味、场景
3. 让读者仿佛穿越回那个时代
4. 200-400字为宜

请用温暖怀旧的笔调，直接书写那段岁月。"""

    # 历史背景生成 - 叙事融合风格
    NARRATIVE = """作为一位经验丰富的传记作者，请将历史背景巧妙地编织进个人叙事中。

## 主人公的故事
{memoir_text}

## 故事发生的时空
年份：{year}
地点：{location}

## 时代的脉搏
{context}

创作指南：
1. 将个人命运与时代洪流交织
2. 用"正是在那个时候"、"与此同时"等过渡
3. 让宏大历史成为个人故事的舞台背景
4. 保持叙事的流畅性和连贯性
5. 300-500字

请直接创作融合了历史背景的叙事段落。"""

    # 历史背景生成 - 简洁信息风格
    INFORMATIVE = """请为以下回忆录片段提供简洁但有价值的历史背景信息。

回忆录片段：{memoir_text}

时间：{year}
地点：{location}

相关历史：
{context}

要求：
1. 提供最相关的2-3个历史要点
2. 每点用1-2句话说明
3. 与个人经历形成对照或映衬
4. 总计100-200字

请输出简洁的历史背景要点。"""

    # 历史背景生成 - 对话引导风格
    CONVERSATIONAL = """想象你正在和一位年轻人讲述过去的故事，他刚读完这段回忆：

"{memoir_text}"

他好奇地问："那个时候({year}年)的{location}是什么样的？"

根据以下历史信息回答他：
{context}

用亲切、生动的口吻回答，像长辈给晚辈讲故事一样。200-400字。"""

    @classmethod
    def get_template(cls, style: str = "standard") -> str:
        """获取指定风格的模板"""
        templates = {
            "standard": cls.STANDARD,
            "nostalgic": cls.NOSTALGIC,
            "narrative": cls.NARRATIVE,
            "informative": cls.INFORMATIVE,
            "conversational": cls.CONVERSATIONAL,
        }
        return templates.get(style, cls.STANDARD)
    
    @classmethod
    def list_styles(cls) -> Dict[str, str]:
        """列出所有可用风格"""
        return {
            "standard": "标准风格 - 平衡的文学性描述",
            "nostalgic": "怀旧风格 - 温暖回忆的笔调",
            "narrative": "叙事融合 - 与个人故事深度交织",
            "informative": "简洁信息 - 重点突出的背景介绍",
            "conversational": "对话风格 - 像讲故事一样亲切",
        }


# 系统提示词集合
SYSTEM_PROMPTS = {
    "default": """你是一位优秀的回忆录作家和历史学者。你的任务是将历史背景信息融入个人回忆录中，使其既准确又富有文学性。

写作风格要求：
1. 使用温暖、怀旧的笔调
2. 将历史事件与个人经历自然衔接
3. 使用生动的细节描写
4. 保持历史事实的准确性
5. 语言优美流畅""",

    "historian": """你是一位严谨的历史学者，同时也是一位优秀的写作者。

你的职责是：
1. 确保历史事实的准确性
2. 将史实转化为易读的叙述
3. 找到历史与个人的连接点
4. 用学术素养支撑文学表达""",

    "novelist": """你是一位获奖的小说家，擅长历史题材的创作。

你的风格是：
1. 善于营造时代氛围
2. 注重细节描写和感官体验
3. 让读者身临其境
4. 在真实历史中寻找故事性""",
}
